{"ast":null,"code":"import Swal from \"sweetalert2\";\nimport { db } from \"../firebase/firebase-config\";\nimport { fileUpload } from \"../helpers/fileUpload\";\nimport { loadNotes } from \"../helpers/loadNotes\";\nimport { types } from \"../types/types\";\nexport const startNewNote = () => {\n  return async (dispatch, getState) => {\n    const {\n      uid\n    } = getState().auth;\n    const newNote = {\n      title: '',\n      body: '',\n      date: new Date().getTime()\n    };\n    const doc = await db.collection(`${uid}/journal/notes`).add(newNote);\n    dispatch(activeNote(doc.id, newNote));\n  };\n};\nexport const activeNote = (id, note) => ({\n  type: types.notesActive,\n  payload: {\n    id,\n    ...note\n  }\n});\nexport const startLoadingNotes = uid => {\n  return async dispatch => {\n    const notes = await loadNotes(uid);\n    console.log(notes);\n    dispatch(setNotes(notes));\n  };\n};\nexport const setNotes = notes => ({\n  type: types.notesLoad,\n  payload: notes\n});\nexport const startSaveNote = note => {\n  return async (dispatch, getState) => {\n    const {\n      uid\n    } = getState().auth;\n\n    if (!note.imageUrl) {\n      delete note.imageUrl;\n    }\n\n    const noteToFirestore = { ...note\n    };\n    delete noteToFirestore.id;\n    await db.doc(`${uid}/journal/notes/${note.id}`).update(noteToFirestore);\n    dispatch(refreshNote(note.id, noteToFirestore));\n    Swal.fire('Saved: ', note.title, 'success');\n  };\n};\nexport const refreshNote = (id, note) => ({\n  type: types.notesUpdated,\n  payload: {\n    id,\n    note: {\n      id,\n      ...note\n    }\n  }\n});\nexport const startUpload = file => {\n  return async (dispatch, getState) => {\n    const {\n      active: activeNote\n    } = getState().notes;\n    Swal.fire({\n      title: 'Uploading...',\n      text: 'Please wait...',\n      allowOutsideClick: false,\n      onBeforeOpen: () => {\n        Swal.showLoading();\n      }\n    });\n    const fileUrl = await fileUpload(file);\n    activeNote.imageUrl = fileUrl;\n    dispatch(startSaveNote(activeNote));\n    Swal.close();\n  };\n};","map":{"version":3,"sources":["/home/ielizondo/Documents/Documentacion React/react/06-journal-app/src/acction/notes.js"],"names":["Swal","db","fileUpload","loadNotes","types","startNewNote","dispatch","getState","uid","auth","newNote","title","body","date","Date","getTime","doc","collection","add","activeNote","id","note","type","notesActive","payload","startLoadingNotes","notes","console","log","setNotes","notesLoad","startSaveNote","imageUrl","noteToFirestore","update","refreshNote","fire","notesUpdated","startUpload","file","active","text","allowOutsideClick","onBeforeOpen","showLoading","fileUrl","close"],"mappings":"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","sourcesContent":["import Swal from \"sweetalert2\";\nimport { db } from \"../firebase/firebase-config\";\nimport { fileUpload } from \"../helpers/fileUpload\";\nimport { loadNotes } from \"../helpers/loadNotes\";\nimport { types } from \"../types/types\";\n\n\nexport const startNewNote = () => {\n    return async( dispatch, getState ) => {\n\n        const { uid } = getState().auth;\n        \n        const newNote = {\n            title: '',\n            body: '',\n            date: new Date().getTime()\n        }\n\n        const doc = await db.collection(`${ uid }/journal/notes`).add( newNote );\n        \n        dispatch( activeNote(doc.id, newNote ) );\n    }\n}\n\nexport const activeNote = (id, note) => ({\n    type: types.notesActive,\n    payload: {\n        id,\n        ...note\n    }\n});\n\nexport const startLoadingNotes = ( uid ) => {\n    return async( dispatch ) => {\n\n        const notes = await loadNotes( uid );\n        console.log(notes);\n        dispatch( setNotes( notes ) );\n\n    }\n}\n\nexport const setNotes = ( notes ) => ({\n    type: types.notesLoad,\n    payload: notes\n});\n\nexport const startSaveNote = ( note ) => {\n    return async( dispatch, getState ) => {\n\n        const { uid } = getState().auth;\n\n        if ( !note.imageUrl ){\n            delete note.imageUrl;\n        }\n\n        const noteToFirestore = { ...note };\n        delete noteToFirestore.id;\n\n        await db.doc(`${ uid }/journal/notes/${ note.id }`).update( noteToFirestore );\n\n        dispatch( refreshNote( note.id, noteToFirestore ) );\n        Swal.fire('Saved: ',note.title, 'success');\n    }\n}\n\nexport const refreshNote = ( id, note ) => ({\n\n    type: types.notesUpdated,\n    payload:{\n        id,\n        note: {\n            id,\n            ...note\n        }\n    }\n});\n\nexport const startUpload = ( file ) => {\n    return async ( dispatch, getState ) => {\n\n        const {active:activeNote } = getState().notes;\n\n        Swal.fire({\n            title: 'Uploading...',\n            text:'Please wait...',\n            allowOutsideClick: false,\n            onBeforeOpen: () => {\n                Swal.showLoading();\n            }\n        });\n\n        const fileUrl = await fileUpload(file);\n        activeNote.imageUrl = fileUrl;\n\n        dispatch( startSaveNote(activeNote))\n\n        Swal.close();\n\n    }\n}"]},"metadata":{},"sourceType":"module"}